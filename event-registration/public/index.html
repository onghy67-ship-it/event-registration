<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration Dashboard</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .category-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-left: 10px;
    }
    .category-science {
      background: #e3f2fd;
      color: #1565c0;
    }
    .category-business {
      background: #fff3e0;
      color: #e65100;
    }
    .category-selector {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }
    .category-btn {
      padding: 12px 30px;
      border: 2px solid #ddd;
      border-radius: 10px;
      background: white;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.2s;
    }
    .category-btn:hover {
      border-color: #4a90d9;
    }
    .category-btn.active-science {
      border-color: #1565c0;
      background: #e3f2fd;
      color: #1565c0;
    }
    .category-btn.active-business {
      border-color: #e65100;
      background: #fff3e0;
      color: #e65100;
    }
    .header.science-theme {
      background: linear-gradient(135deg, #1565c0, #42a5f5);
    }
    .header.business-theme {
      background: linear-gradient(135deg, #e65100, #ff9800);
    }
  </style>
</head>
<body>
  <header class="header" id="header">
    <h1>
      <span id="eventName">Event Registration</span>
      <span class="category-badge" id="categoryBadge"></span>
    </h1>
    <p>Registration Dashboard ç™»è®°ä»ªè¡¨æ¿</p>
    <span class="status-badge" id="connectionStatus">ğŸŸ¢ Connected</span>
  </header>

  <main class="container">
    <!-- Category Selector (shown if no category in URL) -->
    <div class="category-selector" id="categorySelector">
      <button class="category-btn" onclick="selectCategory('science')">
        ğŸ”¬ Science & Engineering<br>ç†å·¥ç§‘
      </button>
      <button class="category-btn" onclick="selectCategory('business')">
        ğŸ’¼ Business & Art<br>å•†ä¸šä¸è‰ºæœ¯
      </button>
    </div>

    <!-- Main Content (hidden until category selected) -->
    <div id="mainContent" style="display: none;">
      <!-- Stats -->
      <section class="stats-grid">
        <div class="stat-card total">
          <div class="stat-number" id="totalCount">0</div>
          <div class="stat-label">Total æ€»æ•°</div>
        </div>
        <div class="stat-card waiting">
          <div class="stat-number" id="waitingCount">0</div>
          <div class="stat-label">Waiting ç­‰å€™</div>
        </div>
        <div class="stat-card inside">
          <div class="stat-number" id="insideCount">0</div>
          <div class="stat-label">Inside è¿›è¡Œä¸­</div>
        </div>
        <div class="stat-card available">
          <div class="stat-number" id="availableSlots">0</div>
          <div class="stat-label">Available å‰©ä½™</div>
        </div>
      </section>

      <!-- QR Code -->
      <section class="card qr-section">
        <h3>ğŸ“± <span id="qrTitle">Scan to Register</span></h3>
        <div class="qr-content">
          <div class="qr-box">
            <img id="qrCodeImage" src="" alt="QR Code">
          </div>
          <div class="qr-info">
            <p><strong>Registration URL:</strong></p>
            <code id="registrationUrl"></code>
            <div class="qr-actions">
              <button class="btn btn-outline" onclick="copyUrl()">ğŸ“‹ Copy</button>
              <button class="btn btn-outline" onclick="printQR()">ğŸ–¨ï¸ Print</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Table -->
      <section class="card table-section">
        <div class="table-header">
          <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” Search...">
          <div class="table-actions">
            <button class="btn" onclick="switchCategory()">ğŸ”„ Switch Category</button>
            <button class="btn" onclick="refreshData()">ğŸ”„ Refresh</button>
            <button class="btn btn-primary" onclick="exportCSV()">ğŸ“¥ Export</button>
            <a href="/admin.html" class="btn">âš™ï¸ Admin</a>
          </div>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Time æ—¶é—´</th>
                <th>Name å§“å</th>
                <th>Phone ç”µè¯</th>
                <th>Programme è¯¾ç¨‹</th>
                <th>Status çŠ¶æ€</th>
                <th>Remark å¤‡æ³¨</th>
                <th>Time In</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>

        <div id="emptyState" class="empty-state">
          <span class="empty-icon">ğŸ“‹</span>
          <p>No registrations yet<br>æš‚æ— ç™»è®°</p>
        </div>

        <div id="loadingState" class="loading-state">
          <div class="spinner"></div>
        </div>
      </section>
    </div>
  </main>

  <!-- Delete Modal -->
  <div class="modal-backdrop" id="deleteModal">
    <div class="modal">
      <h3>Delete Registration?</h3>
      <p>This action cannot be undone.</p>
      <div class="modal-buttons">
        <button class="btn" onclick="closeModal()">Cancel</button>
        <button class="btn btn-danger" id="confirmDelete">Delete</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>
