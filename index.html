<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration Dashboard</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <header class="header">
    <h1 id="eventName">Event Registration</h1>
    <p>Registration Dashboard ç™»è®°ä»ªè¡¨æ¿</p>
    <span class="status-badge" id="connectionStatus">ğŸŸ¢ Connected</span>
  </header>

  <main class="container">
    <!-- Stats -->
    <section class="stats-grid">
      <div class="stat-card total">
        <div class="stat-number" id="totalCount">0</div>
        <div class="stat-label">Total æ€»æ•°</div>
      </div>
      <div class="stat-card waiting">
        <div class="stat-number" id="waitingCount">0</div>
        <div class="stat-label">Waiting ç­‰å€™</div>
      </div>
      <div class="stat-card inside">
        <div class="stat-number" id="insideCount">0</div>
        <div class="stat-label">Inside è¿›è¡Œä¸­</div>
      </div>
      <div class="stat-card available">
        <div class="stat-number" id="availableSlots">0</div>
        <div class="stat-label">Available å‰©ä½™</div>
      </div>
    </section>

    <!-- QR Code -->
    <section class="card qr-section">
      <h3>ğŸ“± Visitor Registration è®¿å®¢ç™»è®°</h3>
      <div class="qr-content">
        <div class="qr-box">
          <img id="qrCodeImage" src="" alt="QR Code">
        </div>
        <div class="qr-info">
          <p><strong>Registration URL:</strong></p>
          <code id="registrationUrl"></code>
          <div class="qr-actions">
            <button class="btn btn-outline" onclick="copyUrl()">ğŸ“‹ Copy</button>
            <button class="btn btn-outline" onclick="printQR()">ğŸ–¨ï¸ Print</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Table -->
    <section class="card table-section">
      <div class="table-header">
        <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” Search...">
        <div class="table-actions">
          <button class="btn" onclick="refreshData()">ğŸ”„ Refresh</button>
          <button class="btn btn-primary" onclick="exportCSV()">ğŸ“¥ Export</button>
          <a href="/admin.html" class="btn">âš™ï¸ Admin</a>
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Time</th>
              <th>Name å§“å</th>
              <th>Phone ç”µè¯</th>
              <th>Programme è¯¾ç¨‹</th>
              <th>Status çŠ¶æ€</th>
              <th>Remark å¤‡æ³¨</th>
              <th>Time In</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>

      <div id="emptyState" class="empty-state">
        <span class="empty-icon">ğŸ“‹</span>
        <p>No registrations yet<br>æš‚æ— ç™»è®°</p>
      </div>

      <div id="loadingState" class="loading-state">
        <div class="spinner"></div>
      </div>
    </section>
  </main>

  <!-- Delete Modal -->
  <div class="modal-backdrop" id="deleteModal">
    <div class="modal">
      <h3>Delete Registration?</h3>
      <p>This cannot be undone.</p>
      <div class="modal-buttons">
        <button class="btn" onclick="closeModal()">Cancel</button>
        <button class="btn btn-danger" id="confirmDelete">Delete</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>